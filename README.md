# 2026年衆議院議員総選挙 政策比較アプリ

## 📋 プロジェクト概要

2026年2月8日投開票の衆議院議員総選挙に向けた、家族向けの政策比較・候補者確認アプリです。

### 🤝 共同開発体制

- **Gemini（戦略・データ担当）**: 最新公約の検索、各職種への最適化、election_data.json の作成
- **Claude（実装担当）**: Streamlitアプリの構築、UI/UXの実装

## 🗂️ ファイル構成

```
election_app/
├── app.py                  # Streamlitアプリ本体
├── election_data.json      # 政策・候補者データ（Geminiが更新）
└── README.md              # このファイル
```

## 🚀 起動方法

### 1. 依存関係のインストール

```bash
pip install streamlit
```

### 2. アプリの起動

```bash
cd election_app
streamlit run app.py
```

ブラウザで http://localhost:8501 が自動的に開きます。

## 📊 データ構造（election_data.json）

### 基本構造

```json
{
  "parties": [...],      // 政党リスト
  "districts": {...}     // 選挙区別候補者情報
}
```

### parties（政党）の構造

```json
{
  "id": "政党ID（例: ldp, cdp）",
  "name": "政党名",
  "personalized_policies": {
    "医学生": "簡潔な政策サマリー（1〜2文）",
    "開業医": "簡潔な政策サマリー（1〜2文）",
    "勤務医": "簡潔な政策サマリー（1〜2文）",
    "言語聴覚士": "簡潔な政策サマリー（1〜2文）",
    "理学療法士": "簡潔な政策サマリー（1〜2文）",
    "ケアマネージャー": "簡潔な政策サマリー（1〜2文）"
  },
  "personalized_explanations": {
    "医学生": "詳しい解説（専門用語の説明、具体的な金額、影響など）",
    "開業医": "詳しい解説（専門用語の説明、具体的な金額、影響など）",
    "勤務医": "詳しい解説（専門用語の説明、具体的な金額、影響など）",
    "言語聴覚士": "詳しい解説（専門用語の説明、具体的な金額、影響など）",
    "理学療法士": "詳しい解説（専門用語の説明、具体的な金額、影響など）",
    "ケアマネージャー": "詳しい解説（専門用語の説明、具体的な金額、影響など）"
  },
  "general_policies": {
    "消費税": "簡潔な政策サマリー（1〜2文）",
    "投資・経済": "簡潔な政策サマリー（1〜2文）",
    "子育て": "簡潔な政策サマリー（1〜2文）",
    "エネルギー": "簡潔な政策サマリー（1〜2文）",
    "ペット": "簡潔な政策サマリー（1〜2文）"
  },
  "general_explanations": {
    "消費税": "詳しい解説（専門用語の説明、具体的な金額、影響など）",
    "投資・経済": "詳しい解説（専門用語の説明、具体的な金額、影響など）",
    "子育て": "詳しい解説（専門用語の説明、具体的な金額、影響など）",
    "エネルギー": "詳しい解説（専門用語の説明、具体的な金額、影響など）",
    "ペット": "詳しい解説（専門用語の説明、具体的な金額、影響など）"
  }
}
```

**注意：**
- `personalized_explanations` と `general_explanations` はオプション（なくても動作します）
- 解説がある政党とない政党が混在しても問題ありません
- 解説がある場合、アプリで展開可能な形式で表示されます

### districts（選挙区）の構造

```json
{
  "選挙区名（例: 岡山1区）": [
    {
      "name": "候補者名",
      "party": "所属政党",
      "note": "補足情報（現職、経歴など）"
    }
  ]
}
```

## 🔄 Geminiとの連携フロー

### Step 1: Geminiによるデータ収集

Geminiが以下の作業を実施：

1. 2026年衆院選の最新公約を検索
2. 各職種（医学生、医療職等）向けに政策を整理
3. 一般政策（消費税、子育て等）も収集
4. election_data.json の形式で出力

### Step 2: データの差し替え

1. Geminiが生成した最新の `election_data.json` をコピー
2. `election_app/election_data.json` に上書き保存
3. アプリを再起動（Streamlitは自動リロードされます）

### Step 3: 動作確認

- サイドバーで職種を選択
- 関心のある政策トピックを選択
- 各政党の政策が比較表示されることを確認

## 📱 機能説明

### 1. 属性選択機能

**サイドバー「👤 あなたの属性を選択」**

- 複数の職種を同時に選択可能
- 選択した職種に関連する政策のみが表示されます
- 利用可能な職種はJSONデータから自動検出

### 2. 政策トピック選択

**サイドバー「📌 関心のある政策」**

- 消費税、子育て、エネルギーなど一般的な政策トピックを選択
- 複数選択可能
- トピックもJSONデータから自動検出

### 3. 💡 詳しい解説機能（NEW!）

**サイドバー「💡 表示設定」**

- 「詳しい解説を表示」チェックボックスをONにすると、各政策に展開可能な解説が追加されます
- 解説には以下が含まれます：
  - 専門用語の分かりやすい説明
  - 具体的な金額・数字
  - いつから実施されるか
  - あなたや家族への具体的な影響
- 政策をクリック（展開）すると詳細が表示されます

**解説の例：**

```
💊 診療報酬は病院・クリニックが患者さんを診察した時に受け取る報酬のこと。
物価が上がれば自動的に診療報酬も上がる「物価スライド制」を検討します。
また、電子カルテなどデジタル化の設備投資に最大500万円の補助金と税金の
優遇措置を実施。患者さんの待ち時間も短縮されます。
```

### 4. 政党比較表示

- 選択した条件に基づき、各政党の政策をカード形式で表示
- 2カラムレイアウト（スマートフォンでは1カラムに自動調整）
- 専門職向け政策と一般政策を明確に区分
- 💡アイコン付きの展開可能な解説で理解を深められます

### 5. 選挙区検索

**サイドバー「🗺️ 選挙区検索」**

- 選挙区を選択すると、その地域の立候補者情報を表示
- 候補者名、所属政党、補足情報（現職・経歴等）を確認可能

## 🎨 デザインの特徴

### レスポンシブデザイン

- **PC**: 2カラムレイアウト
- **タブレット**: 2カラムレイアウト
- **スマートフォン**: 1カラムレイアウト（自動調整）

### カラースキーム

- プライマリカラー: グラデーション紫（#667eea → #764ba2）
- アクセントカラー: 青系統（#dbeafe, #1e40af）
- 背景: 白ベース、グレーのアクセント
- テキスト: ダークグレー（#1f2937, #6b7280）

### UI要素

- **政党カード**: ホバーエフェクト付き、影で立体感を演出
- **政策項目**: 左側に紫のアクセントライン
- **候補者カード**: シンプルなカードデザイン、党派をバッジ表示

## 🔧 カスタマイズ方法

### 新しい職種を追加

`election_data.json` の `personalized_policies` に新しいキーを追加：

```json
"personalized_policies": {
  "医学生": [...],
  "新しい職種名": ["政策1", "政策2"]
}
```

アプリは自動的に新しい職種を検出し、選択肢に追加します。

### 新しい政策トピックを追加

`election_data.json` の `general_policies` に新しいキーを追加：

```json
"general_policies": {
  "消費税": "...",
  "新しいトピック": "政策内容"
}
```

### 選挙区を追加

`districts` に新しい選挙区を追加：

```json
"districts": {
  "新しい選挙区名": [
    {
      "name": "候補者名",
      "party": "政党名",
      "note": "メモ"
    }
  ]
}
```

## ⚙️ 技術仕様

### フレームワーク

- **Streamlit**: Pythonベースのウェブアプリフレームワーク
- **Python 3.8+**: 推奨

### データ処理の特徴

1. **動的キー検出**: JSONに存在するキーを自動検出
2. **エラーハンドリング**: ファイル読み込みエラーに対応
3. **柔軟な構造**: Geminiが生成する様々なデータ形式に対応
4. **キャッシング**: `@st.cache_data` でデータ読み込みを最適化

### 堅牢性の工夫

```python
# 例1: 職種キーの動的検出
def get_all_profession_keys(parties):
    professions = set()
    for party in parties:
        if "personalized_policies" in party:
            professions.update(party["personalized_policies"].keys())
    return sorted(list(professions))

# 例2: 安全なデータ取得
party_name = party.get("name", "不明な政党")  # デフォルト値で安全に取得
```

## 📝 Geminiへのデータ生成依頼例

Geminiに以下のように依頼してください：

```
2026年2月8日の衆議院議員総選挙について、以下の形式でelection_data.jsonを生成してください：

【必須項目】
1. parties配列に主要政党（自民、立憲、維新、公明、共産、国民民主など）を含める
2. 各政党のpersonalized_policiesに以下の職種向け政策を含める：
   - 医学生、開業医、勤務医、言語聴覚士、理学療法士、ケアマネージャー
3. general_policiesに以下のトピックを含める：
   - 消費税、投資・経済、子育て、エネルギー、ペット
4. districts辞書に主要な選挙区（東京、大阪、愛知、福岡など）の候補者情報

【データ形式】
- personalized_policiesの各職種: 文字列の配列（3-5項目程度）
- general_policiesの各トピック: 政策内容を簡潔な文字列で
- 候補者: name, party, note（現職・経歴等）を含むオブジェクト

最新の公約情報を検索して、できるだけ正確なデータを作成してください。
```

## 🐛 トラブルシューティング

### データが表示されない

1. `election_data.json` のJSON形式が正しいか確認
2. ブラウザのコンソールにエラーが出ていないか確認
3. Streamlitを再起動（Ctrl+C → `streamlit run app.py`）

### 職種や政策が選択肢に表示されない

- `election_data.json` に該当するキーが存在するか確認
- JSONの構造が正しいか確認（カンマ、括弧の過不足など）

### スタイルが反映されない

- ブラウザのキャッシュをクリア
- Streamlitのキャッシュをクリア: `streamlit cache clear`

## 📞 サポート

このアプリは **Claude（実装）** と **Gemini（データ）** の共同プロジェクトです。

- **実装に関する問題**: Claudeに相談
- **データ・公約に関する問題**: Geminiに相談

## 📄 ライセンス

このプロジェクトは教育・情報提供目的で作成されています。
各政党の公約情報は各政党に著作権があります。

---

**最終更新**: 2026年2月5日
**開発**: Claude (Anthropic) × Gemini (Google)
